<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Legacy WildFly Domain Configuration</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article">
<div id="header">
<h1>Legacy WildFly Domain Configuration</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide discusses how to configure WildFly in <strong>Domain mode</strong> using the legacy configuration, which is valid for installations from version 8 up to version 26.</p>
</div>
<div class="paragraph">
<p>In WildFly 27 the legacy Domain configuration has been deprecated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_wildfly_in_domain_mode">Configuring WildFly in Domain mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to
understand the domain configuration, we need at first to understand
which are the key components of a domain. A domain is a collection of
<strong>server groups</strong>; a server group is in turn a collection of
<strong>servers</strong>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The concept of
server groups can be seen as a set of servers managed as a <strong>single
unit</strong> by the domain. You can actually use server groups for
fine-grained configuration of nodes; for example, each server group
is able to define its own settings such as customized JVM settings,
socket bindings interfaces, or deployed applications.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From
the process point of view, a domain is made up of the following
elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Domain
Controller</strong>: The domain controller is the management control point
of your domain. An AS instance running in domain mode will have at
most one process instance acting as a Domain Controller. The
Domain Controller holds a centralized configuration, which is shared
by the node instances belonging to the domain.</p>
</li>
<li>
<p><strong>Host controller</strong>:
It&#8217;s a process that is responsible for coordinating with a Domain
Controller the life-cycle of server processes and the distribution of
deployments, from the Domain Controller to the server instances.</p>
</li>
<li>
<p><strong>Application
server nodes</strong>: These are regular Java processes that map to
instances of the application server. Each server node, in turn,
belongs to a Server group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, when
starting a Domain, you will see another JVM process running on your
machine: this is the <strong>Process controller</strong>. It&#8217;s a very
lightweight process whose primary function is to spawn server
processes and host controller processes, and manage their
input/output streams. Since it&#8217;s not configurable, we will not
further discuss about it.</p>
</div>
<div class="paragraph">
<p>The following
picture summarizes the concepts exposed so far:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ItBuzzPress-WildFly12AdministrationGuidexAdoc_html_ff326f24cfda9592.png" alt="ItBuzzPress WildFly12AdministrationGuidexAdoc html ff326f24cfda9592">
</div>
</div>
<div class="paragraph">
<p>In
the above picture, we have designed a domain made up of a <strong>Domain
Controller</strong>, running on a dedicated server instance and two <strong>Host
Controllers</strong>. The Domain defines two <strong>Server Groups</strong>
(main-server-group and other-server-group which are the default
WildFly server group names); each Server Group in turn contains two
<strong>Servers</strong>, making up a total of 4 WildFly servers.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Pay attention on the <strong>Server Group distribution</strong>, which spans
across the two different Hosts. Say main-server-group contains
one block of applications and other-server-group another
block; with the above configuration you will be able to run both
applications <strong>without a single point of failure</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In
the following section we will show how to create in practice this
Domain configuration by configuring at first configure the Domain
Controller and its <strong>domain.xml</strong> configuration file. Next
we will configure the Host Controllers where your applications can be
provisioned.</p>
</div>
<div class="sect2">
<h3 id="_configuring_the_domain_controller_part_1_domain_xml">Configuring the Domain Controller – Part 1: domain.xml</h3>
<div class="paragraph">
<p>The server
configuration of the domain is centralized in the <strong>domain.xml</strong>
file of the Domain Controller. The domain.xml is located in
the <code>domain/configuration</code> folder and it contains the main
configuration that will be used for all server instances. This file
is only required for the Domain Controller. In the domain.xml
file we will define the <strong>server group</strong> configuration (which can
be anyway changed at runtime, as we will see in a minute).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;server-groups&gt;</span>
        <span class="tag">&lt;server-group</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main-server-group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">profile</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;jvm</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;heap</span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">64m</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">max-size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">512m</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/jvm&gt;</span>
            <span class="tag">&lt;socket-binding-group</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full-sockets</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/server-group&gt;</span>
        <span class="tag">&lt;server-group</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">other-server-group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">profile</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;jvm</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;heap</span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">64m</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">max-size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">512m</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/jvm&gt;</span>
            <span class="tag">&lt;socket-binding-group</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full-sockets</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/server-group&gt;</span>
<span class="tag">&lt;/server-groups&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The above Memory settings are for testing purposes only. In real world scenarios you should use JVM settings in line with your application requirements.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see, we have
defined two server groups: <strong>main-server-group</strong> and
<strong>other-server-group</strong>. Each server group is in turn associated
with a <strong>server</strong> <strong>profile</strong> and a <strong>socket-binding-group</strong>.
The default configuration includes the following pre-configured profiles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>default</strong>:
Supports the Jakarta EE Web-Profile plus some extensions like REST Web
Services or support for EJB3 remote invocations. You should
associate this profile with the "standard-sockets"
socket-binding-group.</p>
</li>
<li>
<p><strong>full</strong>:
supports of Jakarta EE Full-Profile and all server capabilities without
clustering. You should associate this profile with the
"full-sockets" socket-binding-group.</p>
</li>
<li>
<p><strong>ha</strong>: the
default profile with clustering capabilities. You should associate
this profile with the "ha-sockets" socket-binding-group.</p>
</li>
<li>
<p><strong>full-ha</strong>:
 the full profile with clustering capabilities. You should associate
this profile with the "full-ha-sockets" socket-binding-group.</p>
</li>
<li>
<p><strong>load-balancer</strong>:
this profile can be used to allow one or more servers to act as Load
balancer for your cluster</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Quick Recap!</strong>
When running in <strong>Domain mode</strong> you can choose the server
groups configuration among the built-in profiles. When running in
<strong>standalone mode</strong> you can choose the server configuration by
selecting (-c) among the available configuration files.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_domain_controller_part_2_host_xml">Configuring the Domain Controller – Part 2: host.xml</h3>
<div class="paragraph">
<p>The other key domain
configuration file is <strong>host.xml</strong> which defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application
servers which are part of a domain server distribution and the
server group to which they belong.</p>
</li>
<li>
<p>The network
interfaces and security settings for these application servers</p>
</li>
<li>
<p>The location of
the Domain Controller</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In our example Domain
configuration, there are no application servers running on this host;
this means that we have an host which is dedicated to the Domain
Controller. This is stated by the following empty <strong>servers</strong>
element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servers</span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we need to
specify the location of the <strong>Domain Controller</strong>. Since the
Domain Controller will be running on the same Host, we will include a
"local" element into the domain-controller element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;domain-controller&gt;</span>

        <span class="tag">&lt;local</span><span class="tag">/&gt;</span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="tag">&lt;/domain-controller&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is going to be a Master Controller.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can start the
Domain Controller so that will be bound to the IP Address
192.168.0.1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ ./domain.sh -Djboss.bind.address.management=192.168.0.1</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can choose to start the domain using a
non-standard configuration file by passing the <strong>--domain-config</strong>
parameter. Example :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./domain.sh --domain-config=domain-alternate.xml</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before we move to the Host Controllers configuration, create a Management user to allow the Host Controllers to connect to the Domain Controller.</p>
</div>
<div class="paragraph">
<p>From the <code>bin</code> folder of your Domain Controller execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./add-user.sh -ds -m -u wildflyadmin -p password1!

Updated user 'administrator1' to file '/home/jboss/domain/master/wildfly-27.0.0.Final/standalone/configuration/mgmt-users.properties'
Updated user 'administrator1' to file '/home/jboss/domain/master/wildfly-27.0.0.Final/domain/configuration/mgmt-users.properties'
To represent the user add the following to the server-identities definition &lt;secret value="cGFzc3dvcmQxIQ==" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Take note of the secret value "cGFzc3dvcmQxIQ==" as we will use it in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_host_controllers_host_xml">Configuring the Host Controllers (host.xml)</h3>
<div class="paragraph">
<p>After the Domain
Controller is configured and started, the next step is to setup the
two Host Controllers. The Host Controller configuration will download
the Domain configuration from the Domain Controller and use its
<strong>host.xml</strong> file, to define the servers running in it.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As an
alternative you can name the host file as you like and start the
domain with the the <strong>--host-config</strong> parameter. Example:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">./domain.sh --host-config=host-slave.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The
first thing is to choose a <strong>unique</strong> name for each host in our
domain to avoid name conflicts. So we will choose for the first host
the name "<strong>host1</strong>":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;host</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:jboss:domain:20.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">host1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    ...

<span class="tag">&lt;/host&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And for the second host
the name "<strong>host2</strong>":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;host</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:jboss:domain:20.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">host2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    ...

<span class="tag">&lt;/host&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we need to
specify that the Host Controller will connect to a remote Domain
Controller. We will not specify the actual IP and port of the Domain
Controller but leave them as a property named
<strong>jboss.domain.master.address</strong> and <strong>jboss.domain.master.port</strong>.</p>
</div>
<div class="paragraph">
<p>Additionally, we need
to specify the username, which will be used to connect to the Domain
Controller. So let’s add to the Domain Controller the user
<strong>wildflyadmin</strong> which we have formerly created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;domain-controller&gt;</span>
    <span class="tag">&lt;remote</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address}</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wildflyadmin</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">security-realm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ManagementRealm</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/domain-controller&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>No default for this property. We will define it at start-up</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, we need to
specify the Base64 password for the server identity we have included
in the remote element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;management&gt;</span>
   <span class="tag">&lt;security-realms&gt;</span>
      <span class="tag">&lt;security-realm</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ManagementRealm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;server-identities&gt;</span>
            <span class="tag">&lt;secret</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cGFzc3dvcmQxIQ==</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
         <span class="tag">&lt;/server-identities&gt;</span>
          . . . . . .
      <span class="tag">&lt;/security-realm&gt;</span>
   <span class="tag">&lt;/security-realms&gt;</span>
        . . . . . .
<span class="tag">&lt;/management&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the secret we have generated using add-user.sh script on the Master Controller</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The authentication is not required if the
Remote Domain Controller is located on the same machine (e.g.
localhost).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The
last step is to configure the <strong>server</strong> nodes inside the <strong>host.xml</strong>
file on both hosts. Here is the first Host Controller (<strong>host1</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servers&gt;</span>
        <span class="tag">&lt;server</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">server-one</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">group</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main-server-group</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;server</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">server-two</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">group</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">other-server-group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">auto-start</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;socket-bindings</span> <span class="attribute-name">port-offset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">150</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/server&gt;</span>
<span class="tag">&lt;/servers&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the second
Host Controller (<strong>host2</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servers&gt;</span>
        <span class="tag">&lt;server</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">server-three</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">group</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main-server-group</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;server</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">server-four</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">group</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">other-server-group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">auto-start</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;socket-bindings</span> <span class="attribute-name">port-offset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">150</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/server&gt;</span>
<span class="tag">&lt;/servers&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please notice the <strong>auto-start</strong> flag indicates that the server
instances will not be started automatically if the host controller is
started. If the auto-start is omitted, by default the server will
start.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For
the server-two and server-four a port-offset of 150 is used to avoid
port conflicts. With the port offset, we can reuse the socket-binding
group of the domain configuration for multiple server instances on
one host. Done with our configuration, we can start <strong>host1</strong>
with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ ./domain.sh -b 192.168.0.2 -Djboss.domain.master.address=192.168.0.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>And as well we can
start <strong>host2</strong> with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ ./domain.sh -b 192.168.0.3 -Djboss.domain.master.address=192.168.0.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you look at the
Domain Controller console, you should notice the following output,
which shows that the Domain Controller has started and the other
slave hosts have successfully connected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Host Controller] 18:46:26,867 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full {wildfly_version_full} ({wildfly_core_full}) (Host Controller) started in 4448ms - Started 77 of 79 services (23 services are lazy, passive or on-demand)
[Host Controller] 18:46:48,790 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 29) WFLYHC0019: Registered remote slave host "host1", JBoss  WildFly Full {wildfly_version_full} ({wildfly_core_full})
[Host Controller] 18:47:12,799 INFO  [org.jboss.as.domain.controller] (Host Controller Service Threads - 29) WFLYHC0019: Registered remote slave host "host2", JBoss  WildFly Full {wildfly_version_full} ({wildfly_core_full})</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default a host controller requires a
connection to the domain controller to be started. It is however
possible to start the Host controller using its locally cached
configuration by passing the parameter <strong>--cached-dc</strong> . Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ domain.sh --host-config=host-slave.xml --cached-dc</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_domain_breakdown">Domain breakdown</h3>
<div class="paragraph">
<p>The
above configuration has produced a domain configuration made up of a
dedicated Domain Controller and a set of four server nodes split into
two Server Groups and two different Hosts as shown by the following
picture:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ItBuzzPress-WildFly12AdministrationGuidexAdoc_html_d4344f9afbe49987.png" alt="ItBuzzPress WildFly12AdministrationGuidexAdoc html d4344f9afbe49987">
</div>
</div>
<div class="paragraph">
<p>With
the above architecture, the hosts where applications are deployed are
completely independent from administrative tasks. On the other hand,
the Domain Controller is solely responsible for the management of the
domain. As per definition, there can be at most one Domain Controller
in a Domain, this means that you should care for Domain Controller
restart in case of failure.</p>
</div>
<div class="paragraph">
<p>Although this might
appear a limitation, it is not so critical as it might seems: at
first the Domain Controller is not at all necessary to keep running
your applications on server nodes. Let’s repeat it again, the
Domain Controller is solely responsible for managing your
Domain (e.g server start/stop, application deployment etc.).</p>
</div>
<div class="paragraph">
<p>Next, you can get
notified of a Domain Controller failure with very simple network
instruments such as any port monitoring script or, if you are looking
for more advanced options, have a look at the <a href="#_domain_controller_failover">Domain Controller Failover</a> section, which is described a few sections
ahead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_managing_the_wildfly_domain">Managing the WildFly Domain</h3>
<div class="paragraph">
<p>So far we have built up
a sample Domain using the XML configuration files. The recommended
way to control your Domain resources and structure is by means of the
Web console and the Command Line Interface.</p>
</div>
<div class="paragraph">
<p>We have dedicated one
section named <a href="#Managing the Domain with HAL Management Console">[Managing the Domain with HAL Management Console]</a>
to the Admin Console. We will cover now Domain management using the
Command Line Interface.</p>
</div>
<div class="paragraph">
<p>The first step will be
connecting to the Domain Controller which listen on the
<strong>jboss.bind.address.management</strong> (if not set defaults to
127.0.0.1) and to the port <strong>jboss.management.http.port </strong>(if not
set defaults to 9990).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ ./jboss-cli.sh --connect controller=192.168.0.1:9990

[domain@192.168.0.1:9990/]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CLI management interfaces relies on the <strong>local</strong> mechanism
which means that any user connecting from a local host will be
granted a guest access. See the section <a href="#The Management Realm">[The Management Realm]</a> for more information.</p>
</div>
<div class="paragraph">
<p>On the other hand, if the Domain Controller is located on a remote
host an username/password challenge will be displayed.
Once connected, you
will see from a CLI tab expansion that new options are available to
control your Domain</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990/] /

core-service
     extension              management-client-content  server-group

deployment
   host                       path
socket-binding-group

deployment-overlay
interface               profile                    system-property</code></pre>
</div>
</div>
<div class="paragraph">
<p>More in detail let&#8217;s
focus on these elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>profile</strong>:
The profile is the path required to modify the configuration of the
profiles contained in the Domain</p>
</li>
<li>
<p><strong>host</strong>: The
host path can be used for host-wide operation (reload/restart) and
for accessing the single servers of your Domain</p>
</li>
<li>
<p><strong>server-group</strong>:
the server-group path can be used to perform Server-Group wide
operations (start/stop/restart/reload)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With this simple schema
in our mind, we will go through the most common Domain management
tasks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_managing_the_domain_profiles">Managing the Domain Profiles</h3>
<div class="paragraph">
<p>The most obvious task
for a System administrator will be varying the configuration of a
profile. Each time you need to do that, just prepend the <strong>profile
name</strong>, before digging into the subsystem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@host:9990 /] /profile=[profile]/subsystem=[subsystem]:[operation]</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, if you are
to change an ejb3 settings (e.g. timeout of SLSB) in the full
profile, then you could execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /profile=full/subsystem=ejb3/strict-max-bean-instance-pool=slsb-strict-max-pool:write-attribute(name=timeout,value=100)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_the_domain_hosts">Managing the Domain Hosts</h3>
<div class="paragraph">
<p>Some management
operations are to be performed at server level. For example, you can
decide to <strong>start</strong>, <strong>stop</strong>, <strong>suspend</strong>, <strong>resume</strong> or
<strong>restart</strong> a server node. For each operation, you will find the
corresponding command under:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@host:9990 /] /host=[host]/server-config=[server]:[operation]</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, let&#8217;s see
how to <strong>restart</strong> the server-one which is available on the
"master" host:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=master/server-config=server-one:restart
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; &quot;STARTING&quot;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using the host&#8217;s
<strong>server-config</strong> path, it is also possible to create or remove
new servers. The only requirement is to fill up the mandatory
attributes. Here is how to <strong>add a server</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=master/server-config=server-five:add(auto-start=false, socket-binding-port-offset=400, group=main-server-group)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now check that the Host
includes the new server with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=master:read-children-names(child-type=server-config)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;server-one&quot;,
        &quot;server-two&quot;,
        &quot;server-five&quot; <i class="conum" data-value="1"></i><b>(1)</b>
    ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The server we have added.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The new server is
already operative so, for example, you can execute start/stop command
or provision deployments on it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=master/server-config=server-five:start
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; &quot;STARTING&quot;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Conversely, it is also
possible to <strong>remove</strong> a Server from the configuration. The only
requirement is that the Server must be stopped. Here is how to remove
the server-five:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=master/server-config=server-five:remove
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, if you are
going to inspect information about the servers, you must proceed
through the following path to reach the subsystem you are interested
to monitor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@host:9990 /] /host=[host]/server=[server]/[subsystem]</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, here is for example
how to gather statistics on the ExampleDS Datasource running on the
server-one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990/] /host=master/server=server-one/subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_managing_the_host_controller">Managing the Host controller</h4>
<div class="paragraph">
<p>When using the <strong>/host</strong>
path, it is possible to control the <strong>Host controller</strong> as well
and not just the Servers running within it. The amount of specific
operations which can be issued on the Host controller include the
Host <strong>reload</strong> and <strong>shutdown</strong>. For example, here is how to
reload the Host named "slave":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=slave:reload
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is how to
shutdown an Host, which will stop all processes running on the Host
Controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /host=slave:shutdown
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that the Host Controller cannot be restarted from the CLI
once stopped! You have to use the <strong>domain.sh</strong> script from
the local host in order to do that.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_the_server_groups">Managing the Server Groups</h3>
<div class="paragraph">
<p>Some management
operations cam be performed also at <strong>Server Group</strong> level. You
can execute the same control operations you have seen at server level
( <strong>start</strong>, <strong>stop</strong>, <strong>suspend</strong>, <strong>resume</strong> or <strong>restart</strong>
) but in this case, they are executed on multiple nodes. Here is how
to restart the main-server-group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /server-group=main-server-group:restart-servers
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the other hand, if
you just need to reload their configuration, you can use the
reload-servers command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.1:9990 /] /server-group=main-server-group:reload-servers
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Sometimes you will be prompted to restart one
or maybe all the servers in a Domain to propagate changes. Do not
shutdown the Host controller for this purpose as you will need a
domain.sh on all Hosts to restart your Domain! Simply issue a
<strong>restart</strong> on the Server Groups and you will save lots of time!
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_domain_controller_failover">Domain Controller Failover</h3>
<div class="paragraph">
<p>At the beginning of
this chapter we have stated that a Domain can contain <strong>at most</strong>
one Domain Controller. Although this rule remain unchanged also in
the latest release of the application server, a new option, called
<strong>Domain Discovery</strong> can let you elect a new Domain Controller in
case of failure.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s make one step
back at first. One of the <strong>domain.sh</strong> startup options is
<strong>--backup</strong> which allows to keep a back up copy of the Domain&#8217;s
Controller&#8217;s configuration (domain.xml) on the Host Controller that
used it. This backup copy can then be used if the Host Controller is
elected as new Domain Controller.</p>
</div>
<div class="paragraph">
<p>The following picture
depicts our Domain Controller failover scenario:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ItBuzzPress-WildFly12AdministrationGuidexAdoc_html_83c5f542751024bd.png" alt="ItBuzzPress WildFly12AdministrationGuidexAdoc html 83c5f542751024bd">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Host1</strong>
is the <strong>Domain Controller </strong>of your Domain. Nothing new to add
to its configuration.</p>
</li>
<li>
<p>The <strong>Host2</strong>
is an  <strong>Host Controller</strong> which connects to the Domain
Controller Host1. This Host is able to elect as Domain Controller
another Host using <strong>discovery-options</strong> held in its host.xml
configuration file</p>
</li>
<li>
<p>The <strong>Host3</strong>
is also an <strong>Host Controller</strong> which, at startup,  connects to
the Domain Controller Host1. This Host Controller however starts
with the --<strong>backup</strong> so we can use it as backup for the Domain
Controller, should it fail.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>What is missing to
describe are the  <strong>discovery-options </strong>which
needs to be included in the Host2&#8217;s
 <strong>host.xml</strong> file
in order to reconnect to a Backup Domain Controller. The
discovery-options include
one or more additional Domain Controllers which will be contacted in
case there is a failure in communication with the default Domain
Controller.</p>
</div>
<div class="paragraph">
<p>The
following XML excerpt shows
an example of it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;domain-controller&gt;</span>
    <span class="tag">&lt;remote</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address:192.168.0.1}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">security-realm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ManagementRealm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;discovery-options&gt;</span>
            <span class="tag">&lt;static-discovery</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">discovery-one</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">protocol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.protocol:remote}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address:192.168.0.10}</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
               <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;/discovery-options&gt;</span>
     <span class="tag">&lt;/remote&gt;</span>
<span class="tag">&lt;/domain-controller&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the Host Controller that will gain control of the Domain</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As
you can see, within the <strong>discovery-options</strong> section we can
include a <strong>static-discovery</strong> section with the list of backup
Domain Controllers. In our case, we will try to reconnect to the
Host3 which is bound to the IP 192.168.0.10 and port 9999. Next
picture depicts the Failover scenario:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ItBuzzPress-WildFly12AdministrationGuidexAdoc_html_66d597275139678b.png" alt="ItBuzzPress WildFly12AdministrationGuidexAdoc html 66d597275139678b">
</div>
</div>
<div class="paragraph">
<p>In order to re-sync the
Host3 configuration with the configuration held by the defunct Domain
Controller you have however to connect to it with the Command Line
and issue the <strong>write-local-domain-controller</strong> to trigger the
process. Here is a transcript of the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">[domain@192.168.0.10:9999 /] /host=host3:write-local-domain-controller
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; undefined,
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;reload-required&quot;}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, issue a <strong>reload</strong>
in order to propagate the changes through the Domain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_multiple_protocols_to_reconnect_to_the_domain_controller">Using Multiple Protocols to reconnect to the Domain Controller</h3>
<div class="paragraph">
<p>By default you will be
using the <strong>remote</strong> protocol to reconnect to the new Domain
Controller. You can however define multiple mechanisms to reconnect
to a new Domain Controller, for example through the http or https
port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;discovery-options&gt;</span>
    <span class="tag">&lt;static-discovery</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">master-https</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">protocol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https-remoting</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">192.168.0.10</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">9993</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">security-realm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ManagementRealm</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;static-discovery</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">master-http</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">protocol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http-remoting</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">192.168.0.10</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">9990</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/discovery-options&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_multiple_hosts_in_the_discovery_opions">Using Multiple Hosts in the Discovery Opions</h3>
<div class="paragraph">
<p>Besides testing
different protocols you can also try multiple hosts sequentially
tried in case of failure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;domain-controller&gt;</span>
    <span class="tag">&lt;remote</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address:192.168.0.1}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">security-realm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ManagementRealm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;discovery-options&gt;</span>
            <span class="tag">&lt;static-discovery</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">discovery-one</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">protocol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.protocol:remote}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address:192.168.0.10}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;static-discovery</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">discovery-two</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">protocol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.protocol:remote}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.address:192.168.0.20}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${jboss.domain.master.port:9999}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;/discovery-options&gt;</span>
     <span class="tag">&lt;/remote&gt;</span>
<span class="tag">&lt;/domain-controller&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-11-27 09:26:38 +0100
</div>
</div>
</body>
</html>